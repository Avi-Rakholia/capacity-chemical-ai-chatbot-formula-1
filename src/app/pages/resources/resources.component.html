<div class="page">
  
  <main class="main">

    <header class="main__header">

        <div class="main__search">
          <span class="icon icon--search"></span>
          <input
            type="text"
            placeholder="Search Text"
            [value]="searchText"
            (input)="onSearch($any($event.target).value)"
          />
        </div>

        <button class="main__sort" (click)="toggleSort()">
          <span class="icon icon--sort"></span>
        </button>
        
    </header>

    <!-- ROW: TABS LEFT + UPLOAD BUTTON RIGHT -->
<div class="tabs-upload-row">

  <!-- LEFT: 4 TABS -->
  <div class="tabs">
    <button 
      class="tabs__btn" 
      [class.tabs__btn--active]="activeTab === 'all'" 
      (click)="setActiveTab('all')"
    >
      All Resources
    </button>
    <button 
      class="tabs__btn" 
      [class.tabs__btn--active]="activeTab === 'knowledge'" 
      (click)="setActiveTab('knowledge')"
    >
      Knowledge Base
    </button>
    <button 
      class="tabs__btn" 
      [class.tabs__btn--active]="activeTab === 'formulas'" 
      (click)="setActiveTab('formulas')"
    >
      Formulas
    </button>
    <button 
      class="tabs__btn" 
      [class.tabs__btn--active]="activeTab === 'quotes'" 
      (click)="setActiveTab('quotes')"
    >
      Quotes
    </button>
  </div>

  <!-- RIGHT: UPLOAD BUTTON -->
  <div class="upload-btn-wrap">
    <button class="upload-btn" (click)="fileInput.click()">
      <span class="icon icon--upload"></span>
      Upload Files
    </button>

    <!-- HIDDEN FILE INPUT -->
    <input 
      type="file" 
      #fileInput 
      (change)="handleFileUpload($event)" 
      multiple 
      hidden 
    />
  </div>

</div>


    <section class="card">

      <table class="table">

        <thead>
          <tr>
            <th>File</th>
            <th>Date</th>
            <th>File Type</th>
            <th>File Size</th>
            <th class="actions-header">Actions</th>
          </tr>
        </thead>

        <tbody>
          <tr *ngFor="let r of displayedResources">
            <td>{{ r.file }}</td>
            <td>{{ r.date }}</td>
            <td>{{ r.fileType }}</td>
            <td>{{ r.size }}</td>

            <td class="actions-cell">
              <button class="icon-btn" (click)="downloadFile(r)">
                <span class="icon icon--download"></span>
              </button>

              <button class="icon-btn" (click)="shareFile(r)">
                <span class="icon icon--share"></span>
              </button>
            </td>
          </tr>

          <tr *ngIf="displayedResources.length === 0">
            <td colspan="5" class="table__empty">No records match your filters.</td>
          </tr>

        </tbody>
      </table>

    </section>

  </main>

</div>